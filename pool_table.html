<!DOCTYPE html>
<html>
<head>
    <title>Pool Table Visualization</title>
    <style>
        .table-container {
            display: flex;
            justify-content: center;
            margin: 20px;
            cursor: crosshair;
        }
        #aimLine {
            stroke: white;
            stroke-width: 1;
            stroke-dasharray: 5,5;
            display: none;
        }
    </style>
</head>
<body>
    <div class="table-container">
        <svg width="800" height="400" viewBox="0 0 800 400">
            <!-- Table frame (brown rails) -->
            <rect x="0" y="0" width="800" height="400" fill="#8B4513" rx="20"/>
            
            <!-- Green felt -->
            <rect x="40" y="40" width="720" height="320" fill="#006400"/>
            
            <!-- Pockets (holes) -->
            <circle cx="20" cy="20" r="20" fill="black"/> <!-- Top left -->
            <circle cx="400" cy="15" r="20" fill="black"/> <!-- Top middle -->
            <circle cx="780" cy="20" r="20" fill="black"/> <!-- Top right -->
            <circle cx="20" cy="380" r="20" fill="black"/> <!-- Bottom left -->
            <circle cx="400" cy="385" r="20" fill="black"/> <!-- Bottom middle -->
            <circle cx="780" cy="380" r="20" fill="black"/> <!-- Bottom right -->
            
            <!-- Cue ball (white) -->
            <circle cx="200" cy="200" r="15" fill="white" stroke="black" stroke-width="1"/>
            
            <!-- Numbered balls -->
            <!-- First row -->
            <circle cx="550" cy="200" r="15" fill="yellow" stroke="black" stroke-width="1"/> <!-- 1 -->
            <circle cx="578" cy="185" r="15" fill="blue" stroke="black" stroke-width="1"/> <!-- 2 -->
            <circle cx="578" cy="215" r="15" fill="red" stroke="black" stroke-width="1"/> <!-- 3 -->
            
            <!-- Second row -->
            <circle cx="606" cy="170" r="15" fill="purple" stroke="black" stroke-width="1"/> <!-- 4 -->
            <circle cx="606" cy="200" r="15" fill="orange" stroke="black" stroke-width="1"/> <!-- 5 -->
            <circle cx="606" cy="230" r="15" fill="green" stroke="black" stroke-width="1"/> <!-- 6 -->
            
            <!-- Third row -->
            <circle cx="634" cy="155" r="15" fill="brown" stroke="black" stroke-width="1"/> <!-- 7 -->
            <circle cx="634" cy="185" r="15" fill="black" stroke="white" stroke-width="1"/> <!-- 8 -->
            <circle cx="634" cy="215" r="15" fill="yellow" stroke="black" stroke-width="1"/> <!-- 9 -->
            <circle cx="634" cy="245" r="15" fill="blue" stroke="black" stroke-width="1"/> <!-- 10 -->
            
            <!-- Fourth row -->
            <circle cx="662" cy="140" r="15" fill="red" stroke="black" stroke-width="1"/> <!-- 11 -->
            <circle cx="662" cy="170" r="15" fill="purple" stroke="black" stroke-width="1"/> <!-- 12 -->
            <circle cx="662" cy="200" r="15" fill="orange" stroke="black" stroke-width="1"/> <!-- 13 -->
            <circle cx="662" cy="230" r="15" fill="green" stroke="black" stroke-width="1"/> <!-- 14 -->
            <circle cx="662" cy="260" r="15" fill="brown" stroke="black" stroke-width="1"/> <!-- 15 -->
            <!-- Aim line -->
            <line id="aimLine" x1="0" y1="0" x2="0" y2="0"/>
        </svg>
    </div>
    <script>
        const svg = document.querySelector('svg');
        const cueBall = document.querySelector('circle[fill="white"]');
        const aimLine = document.querySelector('#aimLine');
        let isDragging = false;
        let ballInMotion = false;
        let velocity = { x: 0, y: 0 };
        
        // Mouse events for aiming
        svg.addEventListener('mousedown', (e) => {
            if (ballInMotion) return;
            isDragging = true;
            aimLine.style.display = 'block';
            updateAimLine(e);
        });

        svg.addEventListener('mousemove', (e) => {
            if (isDragging) {
                updateAimLine(e);
            }
        });

        svg.addEventListener('mouseup', (e) => {
            if (isDragging) {
                shoot(e);
                isDragging = false;
                aimLine.style.display = 'none';
            }
        });

        function updateAimLine(e) {
            const rect = svg.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            aimLine.setAttribute('x1', cueBall.cx.baseVal.value);
            aimLine.setAttribute('y1', cueBall.cy.baseVal.value);
            aimLine.setAttribute('x2', x);
            aimLine.setAttribute('y2', y);
        }

        function shoot(e) {
            const rect = svg.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Calculate velocity based on distance
            const dx = x - cueBall.cx.baseVal.value;
            const dy = y - cueBall.cy.baseVal.value;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // Scale factor for speed (adjust as needed)
            const power = 0.1;
            velocity.x = -(dx / distance) * power * distance;
            velocity.y = -(dy / distance) * power * distance;
            
            ballInMotion = true;
            requestAnimationFrame(animate);
        }

        function animate() {
            if (!ballInMotion) return;

            // Update position
            let x = cueBall.cx.baseVal.value + velocity.x;
            let y = cueBall.cy.baseVal.value + velocity.y;

            // Bounce off walls
            if (x < 55 || x > 745) {
                velocity.x *= -0.8; // Lose some energy on bounce
                x = x < 55 ? 55 : 745;
            }
            if (y < 55 || y > 345) {
                velocity.y *= -0.8; // Lose some energy on bounce
                y = y < 55 ? 55 : 345;
            }

            // Apply friction
            velocity.x *= 0.99;
            velocity.y *= 0.99;

            // Stop if moving very slowly
            if (Math.abs(velocity.x) < 0.1 && Math.abs(velocity.y) < 0.1) {
                ballInMotion = false;
                velocity.x = 0;
                velocity.y = 0;
                return;
            }

            // Update ball position
            cueBall.setAttribute('cx', x);
            cueBall.setAttribute('cy', y);

            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>
